<%- include('./partials/navbar.ejs', { active: 'home' }) %>

<% if (!user) { %>  
  <div class="row mt-5">
    <div class="col-lg" style="display: flex; height: 100%; text-align: center; flex-direction: column; justify-content: center;">
      <h1>Welcome to BingeBuddy</h1>
      <p>Join BingeBuddy to keep track of your favorite watched Movies and Tv Shows!</p>
      <p>Explore watched movies and tv shows from a community of fellow binge-watchers.</p>
      <h2>Sign up now and start building your watchlist!</h2>
      <a href="/auth/sign-up" class="btn btn-secondary">Sign Up</a>
    </div>

    <div class="col-lg">
      <h2>Already have an account? Sign In below:</h2>
      <form action="/auth/sign-in" method="POST" id="sign-in-form">
        <div class="form-group">
          <label for="username" class="form-label">Username:</label>
          <input type="text" id="username" class="form-control" name="username" placeholder="Enter your username" required />
        </div>
        
        <div class="form-group">
          <label for="password" class="form-label">Password:</label>
          <input type="password" id="password" class="form-control" name="password" placeholder="Enter your password" required />
        </div>          
        
        
        <button type="submit" class="btn btn-primary">Login</button>
      </form>
    </div>
  </div>
<% } else { %>
  <h1>Welcome back to BingeBuddy <%= user.name %>!</h1>
  <% if (sortedContent) { %>
    <ul id="feed">
      <% sortedContent.forEach((obj) => { %>
        <% if (obj.type === 'Movie') { %>
          <%- include ('./partials/moviecard.ejs', { movie: obj })%>
        <% } else { %>
          <%- include('./partials/showcard.ejs', { show: obj })%>
        <% } %>
      <% }) %>
    </ul>
  <% } %>
<% } %>
</div>
<%- include('./partials/footer.ejs') %>
